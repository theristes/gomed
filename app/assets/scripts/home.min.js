$(document).ready(function(){var c,r=8;$.ajax({type:"get",url:"/report",success:function(e){(function t(e,a,i){$("#main-container").empty();e.slice(a,i).forEach(function(t){var e=$("<div>",{id:"div-card",class:"card sticky-top"}),a=$("<div>",{id:"div-card-header-"+t.Codigo,class:"card-header collapsed row pl-2 pr-2 mr-1 ml-1","data-toggle":"collapse","data-target":"#collapse"+t.Codigo,"aria-expanded":"false","aria-controls":"collapse"+t.Codigo}),i=$("<dt>",{class:"col-lg-5 text-dark"}).text(t.Nome),d=$("<dt>",{class:"col-sm-4 text-muted"}).text("CNPJ: "+t.Cnpj),l=$("<i>",{class:"material-icons float-right text-dark"}).text("arrow_drop_down"),n=$("<div>",{id:"collapse"+t.Codigo,class:"collapse","aria-labelledby":"heading"+t.Codigo,"data-parent":"#main-container"}),o=$("<div>",{class:"container card-body text-left"}),s=$("<ul>",{class:"list-group"}),p=$("<li>",{class:"list-group-item d-flex justify-content-between align-items-center"}).text("ID:").append($("<b>",{class:".text-primary"}).text(t.Codigo)),c=$("<li>",{class:"list-group-item d-flex justify-content-between align-items-center"}).text("Produtos com preço:").append($("<span>",{class:"badge badge-primary badge-pill"}).text(t.Produtos_com_preco)),r=$("<li>",{class:"list-group-item d-flex justify-content-between align-items-center"}).text("Produtos sem preço:").append($("<span>",{class:"badge badge-primary badge-pill"}).text(t.Produtos_sem_preco)),g=$("<li>",{class:"list-group-item d-flex justify-content-between align-items-center"}).text("Total de produtos:").append($("<span>",{class:"badge badge-primary badge-pill"}).text(t.Total)),u=$("<li>",{class:"list-group-item d-flex justify-content-between align-items-center"}).text("Produtos repetidos:").append($("<span>",{id:"duplicate-"+t.Codigo,class:"badge badge-danger badge-pill"}).text(t.Produtos_repetidos)),m=$("<button>",{class:"material-icons badge badge-danger badge-pill"}).text("delete");m.click(function(e){$("#modal-duplicates").modal("show"),$.ajax({type:"delete",url:"/delete-duplicates?"+$.param({Id:t.Codigo}),data:{id:t.Codigo},success:function(e){"OK"==e.code&&($("#modal-duplicates-content").empty(),$("#modal-duplicates-content").append($("<b>").text(e.message)),$("#duplicate-"+t.Codigo).text(0),$("#li-duplicate"+t.Codigo).remove())}})});var x=$("<li>",{id:"li-duplicate"+t.Codigo,class:"list-group-item d-flex justify-content-between align-items-center"}).text("Deletar repetidos:").append(m);$("#main-container").append(e),e.append(a),a.append(i),a.append(d),i.append(l),e.append(n),n.append(o),o.append(s),s.append(p),s.append(c),s.append(r),s.append(g),s.append(u),0<t.Produtos_repetidos&&s.append(x)});var d=$("<div>",{class:"bg-transparent fixed-botton d-flex col-12 mt-3"});var l=$("<ul>",{id:"ul-pages",class:"bg-transparent list-inline mx-auto justify-content-center text-light"});$("#main-container").append(d);d.append(l);var n=c.length/r;n=Math.ceil(n);for(var o=0;o<n;o++){var s=$("<button>",{id:"pagelink",class:"bg-transparent text-light"}).text(o+1);s.click(function(e){t(c,a=o*r,i=a+r)});var p=$("<li>",{class:"list-inline-item bg-transparent"}).append(s);$("#ul-pages").append(p)}})(c=e,0,r)}}),$("#log-off").click(function(e){$.ajax({type:"get",url:"/logoff",success:function(e){"OK"==e.code&&$(location).attr("href","/")}})})});